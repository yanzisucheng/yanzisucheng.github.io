(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{754:function(_,v,t){"use strict";t.r(v);var e=t(4),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[_._v("#")]),_._v(" 说明")]),_._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://time.geekbang.org/column/intro/189",target:"_blank",rel:"noopener noreferrer"}},[_._v("《透视HTTP协议》"),t("OutboundLink")],1),_._v("是 "),t("code",[_._v("罗剑锋")]),_._v(" （奇虎360技术专家）在极客时间开的一门专栏课，笔者记录一下学习笔记，仅供参考。")])]),_._v(" "),t("h2",{attrs:{id:"tcp-ip-网络分层模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-网络分层模型"}},[_._v("#")]),_._v(" TCP/IP 网络分层模型")]),_._v(" "),t("p",[_._v("层次图如下：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/2b/03/2b8fee82b58cc8da88c74a33f2146703.png",alt:"层次图"}})]),_._v(" "),t("h3",{attrs:{id:"第一层：链接层（link-layer）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一层：链接层（link-layer）"}},[_._v("#")]),_._v(" 第一层：链接层（link layer）")]),_._v(" "),t("blockquote",[t("p",[_._v("负责在以太网、WiFi 这样的底层网络上发送原始数据包，工作在网卡这个层次，使用 MAC 地址来标记网络上的设备，所以有时候也叫 "),t("code",[_._v("MAC 层")]),_._v("。")])]),_._v(" "),t("h3",{attrs:{id:"第二层：网际层或者网络互连层（internet-layer）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二层：网际层或者网络互连层（internet-layer）"}},[_._v("#")]),_._v(" 第二层：网际层或者网络互连层（internet layer）")]),_._v(" "),t("blockquote",[t("p",[t("code",[_._v("IP 协议")]),_._v("就处在这一层。因为 IP 协议定义了"),t("code",[_._v("IP 地址")]),_._v("的概念，所以就可以在"),t("code",[_._v("链接层")]),_._v("的基础上，用 IP 地址取代 "),t("code",[_._v("MAC 地址")]),_._v("，把许许多多的局域网、广域网连接成一个虚拟的巨大网络，在这个网络里找设备时只要把 IP 地址再“翻译”成 MAC 地址就可以了。")])]),_._v(" "),t("h3",{attrs:{id:"第三层：传输层（transport-layer）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三层：传输层（transport-layer）"}},[_._v("#")]),_._v(" 第三层：传输层（transport layer）")]),_._v(" "),t("blockquote",[t("p",[_._v("保证数据在 IP 地址标记的两点之间“可靠”地传输，是 TCP 协议工作的层次。")])]),_._v(" "),t("ul",[t("li",[t("code",[_._v("TCP")]),_._v("：是一个有状态的协议，需要先与对方建立连接然后才能发送数据，而且保证数据不丢失不重复")]),_._v(" "),t("li",[t("code",[_._v("UDP")]),_._v("：则无状态，不用事先建立连接就可以任意发送数据，但不保证数据一定会发到对方。")]),_._v(" "),t("li",[_._v("TCP 的数据是连续的"),t("code",[_._v("字节流")]),_._v("，"),t("code",[_._v("有先后顺序")]),_._v("，而 UDP 则是分散的小数据包，是"),t("code",[_._v("顺序发")]),_._v("，"),t("code",[_._v("乱序收")]),_._v("。")])]),_._v(" "),t("h3",{attrs:{id:"第四层：应用层（application-layer）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第四层：应用层（application-layer）"}},[_._v("#")]),_._v(" 第四层：应用层（application layer）")]),_._v(" "),t("blockquote",[t("p",[_._v("有各种面向具体应用的协议。例如 "),t("code",[_._v("Telnet、SSH、FTP、SMTP、HTTP")]),_._v("。")])]),_._v(" "),t("p",[t("strong",[_._v("MAC 层的传输单位是"),t("code",[_._v("帧")]),_._v("（frame）。")])]),_._v(" "),t("p",[t("strong",[_._v("IP 层的传输单位是"),t("code",[_._v("包")]),_._v("（packet）。")])]),_._v(" "),t("p",[t("strong",[_._v("TCP 层的传输单位是"),t("code",[_._v("段")]),_._v("（segment）。")])]),_._v(" "),t("p",[t("strong",[_._v("HTTP 的传输单位则是"),t("code",[_._v("消息或报文")]),_._v("（message）。")])]),_._v(" "),t("p",[_._v("可以统称为"),t("code",[_._v("数据包")]),_._v("。")]),_._v(" "),t("h2",{attrs:{id:"osi-网络分层模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#osi-网络分层模型"}},[_._v("#")]),_._v(" OSI 网络分层模型")]),_._v(" "),t("blockquote",[t("p",[_._v("OSI，全称是"),t("code",[_._v("开放式系统互联通信参考模型")]),_._v("（"),t("code",[_._v("Open System Interconnection Reference Model")]),_._v("）。")])]),_._v(" "),t("p",[_._v("OSI 模型分成了七层，如下图：")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/3a/dc/3abcf1462621ff86758a8d9571c07cdc.png",alt:"OSI 模型"}})]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("第一层(物理层)")]),_._v("：网络的物理形式，例如电缆、光纤、网卡、集线器等等")]),_._v(" "),t("li",[t("strong",[_._v("第二层(数据链路层)")]),_._v("：它基本相当于 "),t("code",[_._v("TCP/IP")]),_._v(" 的链接层")]),_._v(" "),t("li",[t("strong",[_._v("第三层(网络层)")]),_._v("：相当于 "),t("code",[_._v("TCP/IP")]),_._v(" 里的网际层")]),_._v(" "),t("li",[t("strong",[_._v("第四层(传输层)")]),_._v("：相当于 "),t("code",[_._v("TCP/IP")]),_._v(" 里的传输层")]),_._v(" "),t("li",[t("strong",[_._v("第五层(会话层)")]),_._v("：维护网络中的连接状态，即保持会话和同步")]),_._v(" "),t("li",[t("strong",[_._v("第六层(表示层)")]),_._v("：把数据转换为合适、可理解的语法和语义")]),_._v(" "),t("li",[t("strong",[_._v("第七层(应用层)")]),_._v("：面向具体的应用传输数据。")])]),_._v(" "),t("h2",{attrs:{id:"两个分层模型的映射关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#两个分层模型的映射关系"}},[_._v("#")]),_._v(" 两个分层模型的映射关系")]),_._v(" "),t("p",[_._v("大概的一个对应关系：")]),_._v(" "),t("ul",[t("li",[_._v("第一层：物理层，"),t("code",[_._v("TCP/IP")]),_._v(" 里无对应")]),_._v(" "),t("li",[_._v("第二层：数据链路层，对应 "),t("code",[_._v("TCP/IP")]),_._v(" 的链接层")]),_._v(" "),t("li",[_._v("第三层：网络层，对应 "),t("code",[_._v("TCP/IP")]),_._v(" 的网际层")]),_._v(" "),t("li",[_._v("第四层：传输层，对应 "),t("code",[_._v("TCP/IP")]),_._v(" 的传输层")]),_._v(" "),t("li",[_._v("第五、六、七层：统一对应到 "),t("code",[_._v("TCP/IP")]),_._v(" 的应用层")])]),_._v(" "),t("blockquote",[t("p",[_._v("TCP/IP 实际应用时的"),t("code",[_._v("会话管理")]),_._v("、"),t("code",[_._v("编码转换")]),_._v("、"),t("code",[_._v("压缩")]),_._v("等和具体应用经常联系的很紧密，很难分开。例如：HTTP 协议就同时包含了"),t("code",[_._v("连接管理")]),_._v("和"),t("code",[_._v("数据格式定义")]),_._v("。")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/9d/94/9d9b3c9274465c94e223676b6d434194.png",alt:"映射关系"}})]),_._v(" "),t("p",[t("strong",[_._v("四层负载均衡")]),_._v("：就是指工作在"),t("code",[_._v("传输层")]),_._v("上，基于 "),t("code",[_._v("TCP/IP")]),_._v(" 协议的特性，例如 IP 地址、端口号等实现对后端服务器的负载均衡。")]),_._v(" "),t("p",[t("strong",[_._v("七层负载均衡")]),_._v("：就是指工作在"),t("code",[_._v("应用层")]),_._v("上，看到的是 HTTP 协议，解析 HTTP 报文里的 URI、主机名、资源类型等数据，再用适当的策略转发给后端服务器。")]),_._v(" "),t("p",[t("strong",[_._v("小窍门")]),_._v("（不是绝对的）：")]),_._v(" "),t("p",[_._v("“"),t("strong",[_._v("两个凡是")]),_._v("”：凡是由操作系统负责处理的就是四层或四层以下，否则，凡是需要由应用程序（也就是你自己写代码）负责处理的就是七层。")]),_._v(" "),t("h2",{attrs:{id:"tcp-ip-协议栈的工作方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-协议栈的工作方式"}},[_._v("#")]),_._v(" TCP/IP 协议栈的工作方式")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/70/6f/70bc19acacf2245fa841349f15cb7a6f.png",alt:"协议栈的工作方式"}})]),_._v(" "),t("p",[_._v("1、HTTP 协议的传输过程就是这样通过协议栈逐层向下，每一层都添加本层的专有数据，层层打包，然后通过下层发送出去。")]),_._v(" "),t("p",[_._v("2、接收数据则是相反的操作，从下往上穿过协议栈，逐层拆包，每层去掉本层的专有头，上层就会拿到自己的数据。")])])}),[],!1,null,null,null);v.default=a.exports}}]);